<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swack - „É°„Ç§„É≥ÁîªÈù¢</title>
    <link rel="icon" href="../static/images/favicon.ico" th:href="@{/images/favicon.ico}">
    <!-- CDN : Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="../static/css/style.css" th:href="@{/css/style.css}">
    <link rel="stylesheet" href="../static/css/main.css" th:href="@{/css/main.css}">
</head>

<body th:attr="data-user-id=${user.userId}">
    <!--„É≠„Éº„Éá„Ç£„É≥„Ç∞„Ç™„Éº„Éê„Éº„É¨„Ç§-->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="spinner">
            </div>
            <p id="loadingMessage">Ë™≠„ÅøËæº„Åø‰∏≠...</p>
        </div>
    </div>
    <header class="header">
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                <img class="user-avatar" th:src="${user.userImgPath}" onerror="this.src='/images/profile/profile.png';" style="width:25px;height:25px;">
            </button>
            <ul class="dropdown-menu">
                <li>
                    <a href="#" class="dropdown-item" data-bs-toggle="modal" data-bs-target="#passwordChangeModal">„Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥</a>
                </li>
                <li>
                </li>
                <li>
                    <button class="dropdown-item" id="profileButton">„Éó„É≠„Éï„Ç£„Éº„É´</button>
                </li>
                <!-- „Çµ„Éñ„É°„Éã„É•„Éº‰ªò„ÅçÊ®©Èôê -->
                <li class="dropdown-submenu" th:if="${user.role == 'ADMIN'}">
                    <a class="dropdown-item dropdown-toggle" href="#">Ê®©Èôê</a>
                    <ul class="dropdown-menu">
                        <li>
                            <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#deleteUserModal">„É¶„Éº„Ç∂ÈÄÄ‰ºö</a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#lockedUsersModal">„Ç¢„Ç´„Ç¶„É≥„Éà„É≠„ÉÉ„ÇØËß£Èô§</a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#grantAuthorityModal">Ê®©Èôê‰ªò‰∏é„ÉªÂ§âÊõ¥</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <form action="logout" id="logoutForm" method="get">
                        <input type="submit" class="btn btn-light btn-sm w-100" value="„É≠„Ç∞„Ç¢„Ç¶„Éà" onclick="handleLogout(event)">
                    </form>
                </li>
            </ul>
            <span th:text="${user.userName}">#userName</span>
        </div>
    </header>
    <div class="container">
        <!--„Éó„É≠„Éï„Ç£„Éº„É´„Éâ„É≠„ÉØ„Éº-->
        <!-- <div id="drawerOverlay" class="drawer-overlay"></div> -->
        <div id="drawerMenu" class="drawer-menu">
            <div class="drawer-header">
                <h3>„Éó„É≠„Éï„Ç£„Éº„É´</h3>
                <button id="closeDrawer" class="drawer-close-btn">√ó</button>
            </div>
            <div class="drawer-content">
                <div class="log-icon">
                    <img class="profile-icon" th:src="${user.userImgPath}" onerror="this.src='/images/profile/profile.png';" style="width:100px;height:100px;">
                    <button id="changeBtn" class="btn btn-primary" type="button">„Ç¢„Ç§„Ç≥„É≥„ÇíÂ§âÊõ¥</button>
                    <span style="font-size: 12px; opacity: 60%;">‚Äª20MB„Åæ„Åß</span>
                    <form id="uploadForm" method="post" enctype="multipart/form-data" th:action="@{/profile/upload}">
                        <input type="file" id="fileInput" accept="image/*" name="image" style="display:none;">
                    </form>
                </div>
                <div class="profile-info">
                    <div class="profile-field">
                        <label>„É¶„Éº„Ç∂„ÉºÂêç</label>
                        <div class="profile-value">
                            <span id="userNameDisplay" th:text="${user.userName}">„É¶„Éº„Ç∂„ÉºÂêç</span>
                        </div>
                    </div>
                    <div class="profile-field">
                        <label>„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</label>
                        <div class="profile-value">
                            <span th:text="${user.mailAddress}">email@example.com</span>
                        </div>
                    </div>
                    <div class="profile-field">
                        <label>„É¶„Éº„Ç∂„ÉºID</label>
                        <div class="profile-value">
                            <span th:text="${user.userId}">U0001</span>
                        </div>
                    </div>
                    <div class="profile-field mt-3 border-top pt-3">
                        <label class="mb-2">„Ç´„É©„Éº„É¢„Éº„Éâ</label>
                        <div class="d-flex gap-2">
                            <button type="button" class="theme-btn flex-fill justify-content-center" onclick="setMode('light')">
                                <span class="theme-preview" style="background-color: #FFFFFF; border: 1px solid #ccc;">
                                </span>
                                <span>„É©„Ç§„Éà</span>
                            </button>
                            <button type="button" class="theme-btn flex-fill justify-content-center" onclick="setMode('dark')">
                                <span class="theme-preview" style="background-color: #1a1d21; border: 1px solid #555;">
                                </span>
                                <span>„ÉÄ„Éº„ÇØ</span>
                            </button>
                        </div>
                    </div>
                    <div class="profile-field mt-3 border-top pt-3">
                        <label class="mb-2">„ÉÜ„Éº„Éû„Ç´„É©„Éº</label>
                        <div class="theme-grid">
                            <button type="button" class="theme-btn" onclick="setTheme('default')">
                                <span class="theme-preview" style="background-color: #3F0E40;">
                                </span>
                                <span>„Éá„Éï„Ç©„É´„Éà</span>
                            </button>
                            <button type="button" class="theme-btn" onclick="setTheme('ocean')">
                                <span class="theme-preview" style="background-color: #1264a3;">
                                </span>
                                <span>Èùí</span>
                            </button>
                            <button type="button" class="theme-btn" onclick="setTheme('forest')">
                                <span class="theme-preview" style="background-color: #2e7d32;">
                                </span>
                                <span>Á∑ë</span>
                            </button>
                            <button type="button" class="theme-btn" onclick="setTheme('choco')">
                                <span class="theme-preview" style="background-color: #4e342e;">
                                </span>
                                <span>Ëå∂</span>
                            </button>
                            <button type="button" class="theme-btn" onclick="setTheme('pumpkin')">
                                <span class="theme-preview" style="background-color: #d35400;">
                                </span>
                                <span>„Ç™„É¨„É≥„Ç∏</span>
                            </button>
                            <button type="button" class="theme-btn" onclick="setTheme('rouge')">
                                <span class="theme-preview" style="background-color: #c0392b;">
                                </span>
                                <span>Ëµ§</span>
                            </button>
                            <button type="button" class="theme-btn" onclick="setTheme('royal')">
                                <span class="theme-preview" style="background-color: #4b0082;">
                                </span>
                                <span>„É≠„Ç§„É§„É´</span>
                            </button>
                            <button type="button" class="theme-btn" onclick="setTheme('mono')">
                                <span class="theme-preview" style="background-color: #1e1e1e;">
                                </span>
                                <span>„É¢„Éé</span>
                            </button>
                            <button type="button" class="theme-btn" onclick="setTheme('pastel')">
                                <span class="theme-preview" style="background: linear-gradient(135deg, #E55D87, #5FC3E4);">
                                </span>
                                <span>„Éë„Çπ„ÉÜ„É´</span>
                            </button>
                            <button type="button" class="theme-btn" onclick="setTheme('sunset')">
                                <span class="theme-preview" style="background: linear-gradient(135deg, #f5af19, #f12711);">
                                </span>
                                <span>„Çµ„É≥„Çª„ÉÉ„Éà</span>
                            </button>
                            <button type="button" class="theme-btn" onclick="setTheme('aurora')">
                                <span class="theme-preview" style="background: linear-gradient(135deg, #11998e, #38ef7d);">
                                </span>
                                <span>„Ç™„Éº„É≠„É©</span>
                            </button>
                            <button type="button" class="theme-btn" onclick="setTheme('berry')">
                                <span class="theme-preview" style="background: linear-gradient(135deg, #8E2DE2, #4A00E0);">
                                </span>
                                <span>„Éô„É™„Éº</span>
                            </button>
                            <button type="button" class="theme-btn" onclick="setTheme('spurs')">
                                <span class="theme-preview" style="background: linear-gradient(135deg, #ffffff, #132257);">
                                </span>
                                <span>„Éç„Ç§„Éì„Éº</span>
                            </button>
                            <button type="button" class="theme-btn" onclick="setTheme('rainbow')">
                                <span class="theme-preview" style="background: linear-gradient(45deg, red, orange, yellow, green, blue, indigo, violet);">
                                </span>
                                <span>‰∫åÈöéÂ†Ç„Ç´„É©„Éº</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <section class="main">
            <!--„Çµ„Ç§„Éâ„Éê„Éº-->
            <div id="left" class="left">
                <h2>Swack</h2>
                <details open>
                    <summary>„É´„Éº„É†
                        <a href="createroom">
                            <button class="btn btn-light btn-sm">‰ΩúÊàê</button>
                        </a>
                        <a href="joinroom">
                            <button class="btn btn-warning btn-sm">ÂèÇÂä†</button>
                        </a>
                    </summary>
                    <div th:each="room : ${roomList}">
                        <a class="list-name list-item" th:href="@{/(roomId=${room.roomId})}" th:if="${room.roomId != null}">
                            <span th:if="${room.privated}">üîí</span>
                            <span th:if="${!room.privated}">üåê</span>
                            <span th:text="${room.roomName}">#roomName</span>
                            <span th:if="${unreadMap != null and unreadMap[room.roomId] != null and unreadMap[room.roomId] > 0}" class="unread-badge" th:text="${unreadMap.get(room.roomId)}">0</span>
                        </a>
                    </div>
                </details>
                <details open>
                    <summary>„ÉÄ„Ç§„É¨„ÇØ„Éà
                        <button class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#myModal2">ËøΩÂä†</button>
                    </summary>
                    <div th:each="direct : ${directList}">
                        <a class="list-name list-item" th:href="@{/(roomId=${direct.roomId})}">üôÇ
                            <span th:text="${direct.roomName}">#roomName</span>
                            <span th:if="${unreadMap != null and unreadMap[direct.roomId] != null and unreadMap[direct.roomId] > 0}" class="unread-badge" th:text="${unreadMap.get(direct.roomId)}">0</span>
                        </a>
                    </div>
                </details>
                <details open>
                    <summary>„Çπ„Çø„Éº‰ªò„Åç„É°„ÉÉ„Çª„Éº„Ç∏</summary>
                    <div>
                        <a class="list-name list-item" th:href="@{/starred}">‚òÖ</a>
                    </div>
                </details>
            </div>
            <div id="resizer" class="resizer">
            </div>
            <!--left -->
            <div class="contents">
                <h2 class="d-flex align-items-center">
                    <span th:text="${room.roomName}">#roomName</span>
                    <span th:if="${room.roomId != 'STAR'}" class="ms-2 dropdown">
                        <!-- „É°„É≥„Éê„Éº„Ç¢„Ç§„Ç≥„É≥ -->
                        <img src="../static/images/person.png" onerror="this.src='/images/person.png';" style="width: 30px; height: 30px; cursor:pointer;" id="roomMembersToggle" data-bs-toggle="dropdown" aria-expanded="false">
                        <!-- „Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥ -->
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="roomMembersToggle">
                            <li th:each="member : ${roomUserList}">
                                <a class="dropdown-item d-flex align-items-center" href="#">
                                    <img th:src="${member.userImgPath}" onerror="this.src='/images/profile/profile.png';" style="width:25px;height:25px;margin-right:8px;">
                                    <span th:text="${member.userName}">„É¶„Éº„Ç∂„ÉºÂêç</span>
                                </a>
                            </li>
                            <li th:if="${#lists.isEmpty(roomUserList)}">
                                <span class="dropdown-item text-muted">„É°„É≥„Éê„Éº„Å™„Åó</span>
                            </li>
                        </ul>
                        <span th:text="${room.memberCount}" class="ms-1">#memberCount</span>
                    </span>
                </h2>
                <div th:if="${!room.directed and room.roomId != 'STAR'}">
                    <div class="join-member-button">
                        <button type="button" class="btn btn-warning btn-sm " data-bs-toggle="modal" data-bs-target="#myModal">
                            <img src="../static/images/addmember.png" onerror="this.src='/images/addmember.png';" style="width: 20px; height: 20px">„É°„É≥„Éê„ÉºËøΩÂä†</button>
                        <!--„É°„É≥„ÉêÔºçËøΩÂä†„É¢„Éº„ÉÄ„É´-->
                        <div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="myModalLabel">„É°„É≥„Éê„ÉºËøΩÂä†</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                        </button>
                                    </div>
                                    <form id="addMember_form" th:action="@{/joinmember/room}" method="post">
                                        <div class="modal-body">
                                            <h1>Swack</h1>
                                            <h2>
                                                <span th:text="${room.roomName}">
                                                </span>„Å´„É°„É≥„Éê„ÉºËøΩÂä†</h2>
                                            <div class="form-group">
                                                <label class="form-label">
                                                </label>
                                                <!-- ÂÖ•Âäõ„Å®„ÉÅ„ÉÉ„Éó„Çí‰∏Ä‰ΩìÂåñ„Åô„Çã„Ç≥„É≥„ÉÜ„Éä -->
                                                <div id="chipInputContainer" class="form-control d-flex flex-wrap align-items-center">
                                                    <!-- „ÉÅ„ÉÉ„Éó„ÅØ„Åì„Åì„Å´ JS „ÅåËøΩÂä† -->
                                                    <input type="text" id="userNameInput" class="border-0 flex-grow-1" style="min-width:150px; outline: none;" placeholder="„É¶„Éº„Ç∂„ÉºÂêç„ÇíÂÖ•Âäõ" maxlength="50" required>
                                                    <input type="hidden" name="roomId" th:value="${room.roomId}">
                                                </div>
                                                <span class="text-secondary ms-2">ÊãõÂæÖ„Åô„Çã„É¶„Éº„Ç∂„ÅÆÂêçÂâç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</span>
                                            </div>
                                            <!-- „É¶„Éº„Ç∂‰∏ÄË¶ß -->
                                            <div id="userList">
                                                <div th:each="oneUser : ${userListNotInRoom}" class="user-item">
                                                    <img class="user-avatar" th:src="${oneUser.userImgPath}" onerror="this.src='/images/profile/profile.png';" alt="User Avatar">
                                                    <div class="user-info">
                                                        <span class="user-name" th:text="${oneUser.mailAddress}">User Name</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Èñâ„Åò„Çã</button>
                                            <button type="submit" class="btn btn-primary">ËøΩÂä†</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div id="logArea" class="contents-main">
                    <div th:each="chatLog, status : ${chatLogList}">
                        <div class="log-area">
                            <div class="log-icon">
                                <img class="user-avatar" th:src="${chatLog.userImgPath}" onerror="this.src='/images/profile/profile.png';">
                            </div>
                            <div class="log-box">
                                <div class="log-box-header">
                                    <p class="log-name">
                                        <span th:text="${chatLog.userName}">#userName</span>
                                        <span th:text="${chatLog.createdAt}" class="log-time">[
                                            <span>#createdAt</span>]</span>
                                        <span class="dropdown-menu-btn" th:attr="data-chatlog-id=${chatLog.chatLogId}">Ô∏ô</span>
                                        <!--„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥„ÅÆ‰∏≠Ë∫´-->
                                    </p>
                                    <div class="dropdown-menu-content" th:id="'dropdown-' + ${chatLog.chatLogId}" style="display: none;">
                                        <a th:if="${user.userId == chatLog.userId or user.role == 'ADMIN'}" class="dropdown-item" th:attr="data-chatlog-id=${chatLog.chatLogId}" onclick="startEdit(this); return false;">Á∑®ÈõÜ</a>
                                        <form th:if="${user.userId == chatLog.userId or user.role == 'ADMIN'}" th:action="@{/main/deleteMessage}" method="post">
                                            <input type="hidden" name="chatLogId" th:value="${chatLog.chatLogId}">
                                            <input type="hidden" name="roomId" th:value="${room.roomId}">
                                            <input type="hidden" name="imageUrl" th:value="${chatLog.imgPath}">
                                            <button type="submit" class="dropdown-item" th:attr="data-chatlog-id=${chatLog.chatLogId}" onclick="deleteMessage(this); return false; ">ÂâäÈô§</button>
                                        </form>
                                        <form th:action="@{/main/starMessage}" method="post">
                                            <input type="hidden" name="chatLogId" th:value="${chatLog.chatLogId}">
                                            <input type="hidden" name="roomId" th:value="${room.roomId}">
                                            <input type="hidden" name="fromStarred" th:value="${room.roomId == 'STAR' ? 'true' : 'false'}">
                                            <button type="submit" class="dropdown-item">‚òÖ</button>
                                        </form>
                                        <!--ÁµµÊñáÂ≠ó-->
                                        <a href="#" class="dropdown-item submenu" th:attr="data-chatlog-id=${chatLog.chatLogId}">üòÄ</a>
                                        <!--„ÅÑ„Çç„Çì„Å™ÁµµÊñáÂ≠ó-->
                                        <div class="dropdown-submenu-content" th:id="'emoji-submenu-' + ${chatLog.chatLogId}" style="display: none;">
                                            <!-- üëç -->
                                            <form th:action="@{/reaction/toggle}" method="post" style="margin:0;">
                                                <input type="hidden" name="chatlogId" th:value="${chatLog.chatLogId}">
                                                <input type="hidden" name="emoji" value="thumbsup">
                                                <input type="hidden" name="userId" th:value="${user.userId}">
                                                <button type="submit" class="dropdown-item btn-link" style="padding:0;">üëç</button>
                                            </form>
                                            <!-- ‚ù§Ô∏è -->
                                            <form th:action="@{/reaction/toggle}" method="post" style="margin:0;">
                                                <input type="hidden" name="chatlogId" th:value="${chatLog.chatLogId}">
                                                <input type="hidden" name="emoji" value="heart">
                                                <input type="hidden" name="userId" th:value="${user.userId}">
                                                <button type="submit" class="dropdown-item btn-link" style="padding:0;">‚ù§Ô∏è</button>
                                            </form>
                                            <!-- üòÇ -->
                                            <form th:action="@{/reaction/toggle}" method="post" style="margin:0;">
                                                <input type="hidden" name="chatlogId" th:value="${chatLog.chatLogId}">
                                                <input type="hidden" name="emoji" value="smile">
                                                <input type="hidden" name="userId" th:value="${user.userId}">
                                                <button type="submit" class="dropdown-item btn-link" style="padding:0;">üòÇ</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="display-mode" th:id="'display-mode-' + ${chatLog.chatLogId}">
                                    <p>
                                        <span th:if="${chatLog.star != null}" th:text="${chatLog.star}">
                                        </span>
                                        <span th:text="${chatLog.message}">#message</span>
                                    </p>
                                    <img th:if="${chatLog.imgPath != null}" th:src="${chatLog.imgPath}" style="max-width: 200px; max-height: 200px;">
                                </div>
                                <!-- „É™„Ç¢„ÇØ„Ç∑„Éß„É≥„Çª„ÇØ„Ç∑„Éß„É≥  Âßã„Åæ„Çä-->
                                <div class="reactions mt-1">
                                    <span th:if="${reactionMap[chatLog.chatLogId] != null}" th:each="r : ${reactionMap[chatLog.chatLogId]}">
                                        <form th:action="@{/reaction/toggle}" method="post" style="display:inline; margin-right:5px;">
                                            <input type="hidden" name="chatlogId" th:value="${chatLog.chatLogId}">
                                            <input type="hidden" name="emoji" th:value="${r.emoji}">
                                            <input type="hidden" name="userId" th:value="${user.userId}">
                                            <button type="submit" class="btn btn-link p-0" style="display:inline; border:none; background:none;">
                                                <span class="reaction-emoji" th:switch="${r.emoji}">
                                                    <span th:case="'thumbsup'">üëç</span>
                                                    <span th:case="'heart'">‚ù§Ô∏è</span>
                                                    <span th:case="'smile'">üòÇ</span>
                                                    <span th:case="*">‚ùì</span>
                                                </span>
                                            </button>
                                            <span class="reaction-count" th:text="${r.count}">1</span>
                                        </form>
                                    </span>
                                </div>
                                <!-- „É™„Ç¢„ÇØ„Ç∑„Éß„É≥„Çª„ÇØ„Ç∑„Éß„É≥ ÁµÇ„Çè„Çä -->
                                <!-- „É°„ÉÉ„Çª„Éº„Ç∏Á∑®ÈõÜ-->
                                <form th:action="@{/main/updateMessage}" method="post">
                                    <div class="edit-mode d-none" th:id="'edit-mode-' + ${chatLog.chatLogId}">
                                        <input type="hidden" name="chatLogId" th:value="${chatLog.chatLogId}">
                                        <input type="hidden" name="roomId" th:value="${room.roomId}">
                                        <div class="form-control mb-2">
                                            <textarea class="form-control mb-2" name="newMessage" th:text="${chatLog.message}">#message</textarea>
                                        </div>
                                        <input type="submit" class="btn btn-sm btn-success" value="‰øùÂ≠ò">
                                        <input type="button" class="btn btn-sm btn-light" th:attr="data-chatlog-id=${chatLog.chatLogId}" onclick="cancelEdit(this); return false;" value="„Ç≠„É£„É≥„Çª„É´">
                                    </div>
                                </form>
                            </div>
                        </div>
                        <!-- log-area -->
                    </div>
                </div>
                <!--contents-main -->
                <div class="contents-footer">
                    <form id="messageForm" th:action="main" method="post" enctype="multipart/form-data">
                        <input type="hidden" name="roomId" th:value="${room.roomId}">
                        <!-- ÁîªÂÉè„Éó„É¨„Éì„É•„ÉºÔºàÈÅ∏Êäû„Åï„Çå„Åü„ÇâË°®Á§∫Ôºâ -->
                        <div id="imagePreview" class="preview" style="display: none;">
                            <img id="previewImg" src="" alt="preview">
                            <span id="removePreview" class="remove">√ó</span>
                        </div>
                        <div class="form-wrap" th:if="${room.roomId != 'STAR'}">
                            <input type="text" id="message" name="message" autocomplete="off">
                            <input type="file" id="fileInputMsg" name="file" accept="image/*" style="display: none;" autocomplete="off">
                            <button id="uploadFile" type="button">
                                <img src="/images/upload_icon.png" style="width: 20px; height: 20px;" alt="„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ">
                            </button>
                            <input type="submit" id="send" value="ÈÄÅ‰ø°">
                        </div>
                    </form>
                </div>
                <!--contents-footer -->
            </div>
            <!--contents -->
        </section>
        <!--main -->
    </div>
    <!-- container -->
    <!-- „Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏ -->
    <div id="errorMsg" style="display: none;" th:text="${errorMsg}">
    </div>
    <!-- CDN : Bootstrap Bundle with Popper -->
    <!-- „É¢„Éº„ÉÄ„É´„Åå„ÅÑ„Å£„Å±„ÅÑ„Å†„Çà-->
    <!--DM„É¢„Éº„ÉÄ„É´„Ç¶„Ç£„É≥„Éâ„Ç¶-->
    <div class="modal fade" id="myModal2" tabindex="-1" aria-labelledby="myModalLabel2" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="myModalLabel2">„É°„É≥„Éê„ÉºËøΩÂä†</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <form th:action="@{/joinmember/direct}" method="post">
                    <div class="modal-body">
                        <h1>Swack</h1>
                        <h2>DM„Å´„É°„É≥„Éê„ÉºËøΩÂä†</h2>
                        <div class="card">
                            <input type="email" name="mailAddress" placeholder="xxxxxx@xxx.xxx" required>
                            <input type="hidden" name="roomId" th:value="DM">
                        </div>
                    </div>
                    <div id="userList">
                        <div th:each="oneUser : ${userListWithoutDirect}" class="user-item">
                            <img class="user-avatar" th:src="${oneUser.userImgPath}" onerror="this.src='/images/profile/profile.png';" alt="User Avatar">
                            <div class="user-info">
                                <span class="user-name" th:text="${oneUser.mailAddress}">User Name</span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Èñâ„Åò„Çã</button>
                        <button type="submit" class="btn btn-primary">ËøΩÂä†</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- ‚ñº „Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥„É¢„Éº„ÉÄ„É´ -->
    <div class="modal fade" id="passwordChangeModal" tabindex="-1" aria-labelledby="passwordChangeModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="passwordChangeModalLabel">„Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Èñâ„Åò„Çã">
                    </button>
                </div>
                <div class="modal-body">
                    <form id="passwordChangeForm">
                        <div class="mb-3">
                            <label for="oldPassword" class="form-label">ÁèæÂú®„ÅÆ„Éë„Çπ„ÉØ„Éº„Éâ</label>
                            <input type="password" class="form-control" id="oldPassword" placeholder="ÁèæÂú®„ÅÆ„Éë„Çπ„ÉØ„Éº„Éâ" required>
                        </div>
                        <div class="mb-3">
                            <label for="newPassword" class="form-label">Êñ∞„Åó„ÅÑ„Éë„Çπ„ÉØ„Éº„Éâ</label>
                            <input type="password" class="form-control" id="newPassword" placeholder="Êñ∞„Åó„ÅÑ„Éë„Çπ„ÉØ„Éº„Éâ" required>
                        </div>
                        <div class="text-end">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">„Ç≠„É£„É≥„Çª„É´</button>
                            <button type="submit" class="btn btn-primary">Â§âÊõ¥</button>
                        </div>
                    </form>
                    <div id="passwordChangeMessage" class="mt-3 text-center">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- „É¶„Éº„Ç∂„ÉºÈÄÄ‰ºö„É¢„Éº„ÉÄ„É´ -->
    <div class="modal fade" id="deleteUserModal" tabindex="-1" aria-labelledby="deleteUserModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header border-bottom-0">
                    <h5 class="modal-title fw-bold" id="deleteUserModalLabel">„É¶„Éº„Ç∂„ÉºÈÄÄ‰ºö</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Èñâ„Åò„Çã">
                    </button>
                </div>
                <div class="modal-body p-4">
                    <div class="form-check pb-3 mb-3 border-bottom">
                        <input class="form-check-input" type="checkbox" id="checkAllUsers">
                        <label class="form-check-label" for="checkAllUsers">„Åô„Åπ„Å¶ÈÅ∏Êäû / Ëß£Èô§</label>
                    </div>
                    <div id="deleteUsersList" class="list-group list-group-flush">
                    </div>
                    <div id="deleteAlert" class="alert d-none mt-3" role="alert">
                    </div>
                </div>
                <div class="modal-footer border-top-0">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Èñâ„Åò„Çã</button>
                    <button type="button" class="btn btn-danger" id="bulkDeleteButton">ÈÅ∏Êäû„Åó„Åü„É¶„Éº„Ç∂„Éº„ÇíÈÄÄ‰ºö„Åï„Åõ„Çã</button>
                </div>
            </div>
        </div>
    </div>
    <!-- „Ç¢„Ç´„Ç¶„É≥„Éà„É≠„ÉÉ„ÇØËß£Èô§„É¢„Éº„ÉÄ„É´ -->
    <div class="modal fade" id="lockedUsersModal" ...>
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-bottom-0">
                    <h5 class="modal-title fw-bold" id="lockedUsersModalLabel">„Ç¢„Ç´„Ç¶„É≥„Éà„É≠„ÉÉ„ÇØ‰∏≠„ÅÆ„É¶„Éº„Ç∂„Éº</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Èñâ„Åò„Çã">
                    </button>
                </div>
                <div class="modal-body p-4">
                    <div id="lockedUsersListArea" class="list-group list-group-flush">
                    </div>
                    <div id="unlockAlert" class="alert d-none mt-3" role="alert">
                    </div>
                </div>
                <div class="modal-footer border-top-0">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Èñâ„Åò„Çã</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Ê®©Èôê‰ªò‰∏é„É¢„Éº„ÉÄ„É´ÔºàË©¶‰ΩúÔºâ-->
    <div class="modal fade" id="grantAuthorityModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Ê®©Èôê„ÅÆÂ§âÊõ¥</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Èñâ„Åò„Çã">
                    </button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info" role="alert">ÁÆ°ÁêÜËÄÖ„Å® ‰∏ÄËà¨„ÅÆÊ®©Èôê„ÇíÂàá„ÇäÊõø„Åà„Åæ„Åô„ÄÇ</div>
                    <div id="authorityUserList" class="list-group list-group-flush">
                    </div>
                    <div id="authorityAlert" class="alert d-none mt-3" role="alert">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Èñâ„Åò„Çã</button>
                </div>
            </div>
        </div>
    </div>
    <!-- ÂÖ•Âäõ„Å®„ÉÅ„ÉÉ„Éó„Çí‰∏Ä‰ΩìÂåñ„Åô„Çã„Ç≥„É≥„ÉÜ„Éä -->
    <div id="chipInputContainer" class="form-control d-flex flex-wrap align-items-center">
        <!-- „ÉÅ„ÉÉ„Éó„ÅØ„Åì„Åì„Å´ JS „ÅåËøΩÂä† -->
        <input type="text" id="userNameInput" class="border-0 flex-grow-1" style="min-width:150px; outline: none;" placeholder="„É¶„Éº„Ç∂„ÉºÂêç„ÇíÂÖ•Âäõ" maxlength="50">
    </div>
    <!--ËøΩÂä†„Åô„Çã„É°„É≥„Éê„Éº-->
    <div id="userList">
        <div th:each="oneUser : ${userList}" class="user-item">
            <img class="user-avatar" th:src="${oneUser.userImgPath}" onerror="this.src='/images/profile/profile.png';" alt="User Avatar">
            <div class="user-info">
                <span class="user-name" th:text="${oneUser.userName}">User Name</span>
                <span class="user-email" th:text="oneUser.mailAddress">
                </span>
            </div>
        </div>
    </div>
    <span class="text-secondary ms-2">ËøΩÂä†„Åô„Çã„É¶„Éº„Ç∂„ÅÆÂêçÂâç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</span>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Èñâ„Åò„Çã</button>
        <button type="submit" class="btn btn-primary">ËøΩÂä†</button>
    </div>
    <!-- ‚ñº „Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥„É¢„Éº„ÉÄ„É´ -->
    <div class="modal fade" id="passwordChangeModal" tabindex="-1" aria-labelledby="passwordChangeModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="passwordChangeModalLabel">„Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Èñâ„Åò„Çã">
                    </button>
                </div>
                <div class="modal-body">
                    <form id="passwordChangeForm">
                        <div class="mb-3">
                            <label for="oldPassword" class="form-label">ÁèæÂú®„ÅÆ„Éë„Çπ„ÉØ„Éº„Éâ</label>
                            <input type="password" class="form-control" id="oldPassword" placeholder="ÁèæÂú®„ÅÆ„Éë„Çπ„ÉØ„Éº„Éâ" required>
                        </div>
                        <div class="mb-3">
                            <label for="newPassword" class="form-label">Êñ∞„Åó„ÅÑ„Éë„Çπ„ÉØ„Éº„Éâ</label>
                            <input type="password" class="form-control" id="newPassword" placeholder="Êñ∞„Åó„ÅÑ„Éë„Çπ„ÉØ„Éº„Éâ" required>
                        </div>
                        <div class="text-end">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">„Ç≠„É£„É≥„Çª„É´</button>
                            <button type="submit" class="btn btn-primary">Â§âÊõ¥</button>
                        </div>
                    </form>
                    <div id="passwordChangeMessage" class="mt-3 text-center">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- „É¶„Éº„Ç∂„ÉºÈÄÄ‰ºö„É¢„Éº„ÉÄ„É´ -->
    <div class="modal fade" id="deleteUserModal" tabindex="-1" aria-labelledby="deleteUserModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header border-bottom-0">
                    <h5 class="modal-title fw-bold" id="deleteUserModalLabel">„É¶„Éº„Ç∂„ÉºÈÄÄ‰ºö</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Èñâ„Åò„Çã">
                    </button>
                </div>
                <div class="modal-body p-4">
                    <div class="form-check pb-3 mb-3 border-bottom">
                        <input class="form-check-input" type="checkbox" id="checkAllUsers">
                        <label class="form-check-label" for="checkAllUsers">„Åô„Åπ„Å¶ÈÅ∏Êäû / Ëß£Èô§</label>
                    </div>
                    <div id="deleteUsersList" class="list-group list-group-flush">
                    </div>
                    <div id="deleteAlert" class="alert d-none mt-3" role="alert">
                    </div>
                </div>
                <div class="modal-footer border-top-0">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Èñâ„Åò„Çã</button>
                    <button type="button" class="btn btn-danger" id="bulkDeleteButton">ÈÅ∏Êäû„Åó„Åü„É¶„Éº„Ç∂„Éº„ÇíÈÄÄ‰ºö„Åï„Åõ„Çã</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Âû¢Ëß£Èô§„É¢„Éº„ÉÄ„É´ -->
    <div class="modal fade" id="lockedUsersModal" ...>
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-bottom-0">
                    <h5 class="modal-title fw-bold" id="lockedUsersModalLabel">„Ç¢„Ç´„Ç¶„É≥„Éà„É≠„ÉÉ„ÇØ‰∏≠„ÅÆ„É¶„Éº„Ç∂„Éº</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Èñâ„Åò„Çã">
                    </button>
                </div>
                <div class="modal-body p-4">
                    <div id="lockedUsersListArea" class="list-group list-group-flush">
                    </div>
                    <div id="unlockAlert" class="alert d-none mt-3" role="alert">
                    </div>
                </div>
                <div class="modal-footer border-top-0">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Èñâ„Åò„Çã</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script th:src="@{/js/main.js}"></script>
    <script th:src="@{/js/invite.js}"></script>
</body>

</html>
